<<<<<<< HEAD
<<<<<<< HEAD
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Dashboard - NoteBridge</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  <style>
    body.high-contrast {
      background-color: #000;
      color: #fff;
    }

    .font-small {
      font-size: 14px;
    }

    .font-medium {
      font-size: 18px;
    }

    .font-large {
      font-size: 22px;
    }

    ul {
      list-style-type: none;
      padding: 0;
    }

    li {
      margin-bottom: 8px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .btn {
      padding: 5px 10px;
      cursor: pointer;
    }

    header,
    section,
    footer {
      margin-bottom: 20px;
    }

    #search-notes {
      margin-bottom: 10px;
      padding: 5px;
      width: 100%;
      max-width: 300px;
    }

    header {
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    header img.logo {
      height: 50px;
      margin-right: 15px;
    }

    header .welcome {
      font-size: 18px;
      margin-left: 10px;
    }

    footer {
      text-align: center;
      font-size: 14px;
      color: #888;
      margin-top: 30px;
      border-top: 1px solid #ccc;
      padding-top: 10px;
    }

    button.tts-btn {
      margin-left: 5px;
    }

    .member-entry {
      display: flex;
      gap: 5px;
      margin-bottom: 5px;
      align-items: center;
    }
  </style>
</head>

<body class="font-medium">
  <header>
    <div style="display:flex; align-items:center;">
      <img src="{{ url_for('static', filename='logo.jpg') }}" alt="NoteBridge Logo" class="logo">
      <div class="welcome">Welcome, {{ user['full_name'] or user['username'] }}!</div>
    </div>
    <nav>
      <a href="{{ url_for('logout') }}" class="btn">Logout</a>
    </nav>
  </header>

  <!-- Accessibility controls -->
  <div aria-label="Accessibility settings" role="region" style="margin-bottom: 20px;">
    <label for="font-size">Font Size:</label>
    <select id="font-size" onchange="changeFontSize(this.value)">
      <option value="font-small">Small</option>
      <option value="font-medium" selected>Medium</option>
      <option value="font-large">Large</option>
    </select>

    <label for="contrast-toggle">High Contrast:</label>
    <input type="checkbox" id="contrast-toggle" onchange="toggleContrast(this.checked)">
  </div>

  <main style="display:flex; gap:40px;">
    <!-- Notebooks Section -->
    <section aria-label="Notebooks" role="region" style="flex:1;">
      <h2>Your Notebooks</h2>
      <input type="text" id="search-notes" placeholder="Search Notes..." oninput="filterNotes()">

      <ul id="notebook-list">
        {% for nb in notebooks %}
        <li>
          <a href="{{ url_for('view_notebook', notebook_id=nb['id']) }}"
            aria-label="Open collaborative editor for {{ nb['title'] }}">
            {{ nb['title'] }}
          </a>
          <button class="tts-btn" onclick="playNote('{{ nb['id'] }}')"
            aria-label="Play notes in {{ nb['title'] }}">üîä</button>
          <button class="tts-btn" onclick="stopNote()" aria-label="Stop reading {{ nb['title'] }}">‚èπ</button>
        </li>
        {% else %}
        <li>No notebooks yet.</li>
        {% endfor %}
      </ul>

      <form method="post" action="{{ url_for('create_notebook') }}">
        <input type="text" name="title" placeholder="New Notebook Title" aria-label="New notebook title">
        <label><input type="checkbox" name="is_shared"> Shared?</label>
        <button type="submit" class="btn">Create Notebook</button>
      </form>
    </section>

    <!-- Groups Section -->
    <section aria-label="Groups" role="region" style="flex:1;">
      <h2>Groups</h2>

      <!-- Existing groups -->
      <ul>
        {% for g in groups %}
        <li>
          <strong>{{ g['name'] }}</strong> ({{ g['members'] }} members)
          <a href="{{ url_for('view_group', group_id=g['id']) }}" class="btn">View</a>
          <a href="{{ url_for('edit_group', group_id=g['id']) }}" class="btn">Edit</a>
          <form method="post" action="{{ url_for('delete_group', group_id=g['id']) }}" style="display:inline">
            <button type="submit" class="btn">Delete</button>
          </form>
        </li>
        {% else %}
        <li>No groups yet.</li>
        {% endfor %}
      </ul>

      <!-- Create new group -->
      <form method="post" action="{{ url_for('create_group') }}">
        <input type="text" name="name" placeholder="Group Name" aria-label="Group Name" required>
        <div id="members-container">
          <h4>Members</h4>
          <div class="member-entry">
            <input type="text" name="member_name[]" placeholder="Name" required>
            <input type="text" name="member_id[]" placeholder="Student ID" required>
            <input type="text" name="member_course[]" placeholder="Course/Project" required>
            <button type="button" onclick="removeMember(this)">Remove</button>
          </div>
        </div>
        <button type="button" onclick="addMember()">Add Member</button>
        <button type="submit" class="btn">Create Group</button>
      </form>
    </section>
  </main>

  <footer>
    &copy; 2025 NoteBridge. All rights reserved.
  </footer>

  <script>
    // Accessibility
    function changeFontSize(sizeClass) {
      document.body.classList.remove('font-small', 'font-medium', 'font-large');
      document.body.classList.add(sizeClass);
    }

    function toggleContrast(enabled) {
      if (enabled) document.body.classList.add('high-contrast');
      else document.body.classList.remove('high-contrast');
    }

    // Search
    function filterNotes() {
      const query = document.getElementById('search-notes').value.toLowerCase();
      const notes = document.getElementById('notebook-list').getElementsByTagName('li');
      for (let note of notes) {
        const text = note.textContent.toLowerCase();
        note.style.display = text.includes(query) ? '' : 'none';
      }
    }

    // Text-to-Speech
    function playNote(notebookId) {
      fetch(`/get_notes_text/${notebookId}`)
        .then(response => response.json())
        .then(data => {
          const text = data.notes_text;
          if (!text) return alert("No notes to read!");
          stopNote(); // Stop any ongoing speech
          const utterance = new SpeechSynthesisUtterance(text);
          utterance.rate = 1;
          utterance.pitch = 1;
          speechSynthesis.speak(utterance);
        })
        .catch(err => console.error(err));
    }

    function stopNote() {
      if (speechSynthesis.speaking) {
        speechSynthesis.cancel();
      }
    }

    // Group members dynamic add/remove
    function addMember() {
      const container = document.getElementById('members-container');
      const entry = document.createElement('div');
      entry.className = 'member-entry';
      entry.innerHTML = `
        <input type="text" name="member_name[]" placeholder="Name" required>
        <input type="text" name="member_id[]" placeholder="Student ID" required>
        <input type="text" name="member_course[]" placeholder="Course/Project" required>
        <button type="button" onclick="removeMember(this)">Remove</button>
      `;
      container.appendChild(entry);
    }

    function removeMember(btn) {
      btn.parentElement.remove();
    }
  </script>
</body>

=======
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Dashboard - NoteBridge</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>

<body class="font-medium dashboard-body">
  <header>
    <div class="logo">
      <img src="{{ url_for('static', filename='logo.jpg') }}" alt="NoteBridge Logo">
      <div class="welcome">Welcome, {{ user['full_name'] or user['username'] }}!</div>
    </div>
    <nav>
      <a href="{{ url_for('auth.logout') }}" class="btn">Logout</a>
    </nav>
  </header>

  <div class="accessibility-controls" aria-label="Accessibility settings" role="region">
    <label for="font-size">Font Size:</label>
    <select id="font-size" onchange="changeFontSize(this.value)">
      <option value="font-small">Small</option>
      <option value="font-medium" selected>Medium</option>
      <option value="font-large">Large</option>
    </select>

    <label for="contrast-toggle">High Contrast:</label>
    <input type="checkbox" id="contrast-toggle" onchange="toggleContrast(this.checked)">

    <button onclick="readDashboard()" aria-label="Read full dashboard">üîä Read Page</button>
    <button onclick="startVoiceCommand()" aria-label="Start voice command">üé§ Voice Command</button>
  </div>

  <main id="main-content" class="dashboard">
    <section aria-label="Notebooks" role="region">
      <h2>Your Notebooks</h2>
      <input type="text" id="search-notes" placeholder="Search Notes..." oninput="filterNotes()"
        aria-label="Search Notes">
      <div id="search-status" aria-live="polite"></div>
      <ul id="notebook-list">
        {% for nb in notebooks %}
        <li>
          <a href="{{ url_for('notebook.view_notebook', notebook_id=nb['id']) }}" aria-label="Open {{ nb['title'] }}">
            {{ nb['title'] }}
          </a>
          <button class="tts-btn" onclick="playNote('{{ nb['id'] }}')" aria-label="Play {{ nb['title'] }}">üîä</button>
          <button class="tts-btn" onclick="stopNote()" aria-label="Stop {{ nb['title'] }}">‚èπ</button>
        </li>
        {% else %}
        <li>No notebooks yet.</li>
        {% endfor %}
      </ul>

      <form method="post" action="{{ url_for('notebook.create_notebook') }}">
        <input type="text" name="title" placeholder="New Notebook Title" aria-label="New notebook title"
          id="new-notebook-input">
        <label><input type="checkbox" name="is_shared"> Shared?</label>
        <button type="submit" class="btn">Create Notebook</button>
      </form>
    </section>

    <section aria-label="Groups" role="region">
      <h2>Groups</h2>
      <ul>
        {% for g in groups %}
        <li>
          <strong>{{ g['name'] }}</strong> ({{ g['members'] }} members)
          <a href="{{ url_for('group.view_group', group_id=g['id']) }}" class="btn">View</a>
          <a href="{{ url_for('group.edit_group', group_id=g['id']) }}" class="btn">Edit</a>
          <form method="post" action="{{ url_for('group.delete_group', group_id=g['id']) }}" class="inline-form">
            <button type="submit" class="btn">Delete</button>
          </form>
        </li>
        {% else %}
        <li>No groups yet.</li>
        {% endfor %}
      </ul>

      <form method="post" action="{{ url_for('group.create_group') }}">
        <input type="text" name="name" placeholder="Group Name" aria-label="Group Name" required>
        <div id="members-container">
          <h4>Members</h4>
          <div class="member-entry">
            <input type="text" name="member_name[]" placeholder="Name" required>
            <input type="text" name="member_id[]" placeholder="Student ID" required>
            <input type="text" name="member_course[]" placeholder="Course/Project" required>
            <button type="button" onclick="removeMember(this)">Remove</button>
          </div>
        </div>
        <button type="button" onclick="addMember()">Add Member</button>
        <button type="submit" class="btn">Create Group</button>
      </form>
    </section>
  </main>

  <footer>
    &copy; 2025 NoteBridge. All rights reserved.
  </footer>

  <script>
    // Accessibility
    function changeFontSize(sizeClass) {
      document.body.classList.remove('font-small', 'font-medium', 'font-large');
      document.body.classList.add(sizeClass);
      announce(`Font size changed to ${sizeClass.replace('font-', '')}`);
    }

    function toggleContrast(enabled) {
      document.body.classList.toggle('high-contrast', enabled);
      announce(enabled ? "High contrast enabled" : "High contrast disabled");
    }

    function announce(msg) {
      const utterance = new SpeechSynthesisUtterance(msg);
      speechSynthesis.speak(utterance);
    }

    // Notebook Search
    function filterNotes() {
      const query = document.getElementById('search-notes').value.toLowerCase();
      const notes = document.getElementById('notebook-list').getElementsByTagName('li');
      let count = 0;
      for (let note of notes) {
        if (note.textContent.toLowerCase().includes(query)) {
          note.style.display = '';
          count++;
        } else {
          note.style.display = 'none';
        }
      }
      document.getElementById('search-status').textContent = `${count} notes found`;
    }

    // TTS for single note
    function playNote(notebookId) {
      fetch(`/get_notes_text/${notebookId}`)
        .then(res => res.json())
        .then(data => {
          if (!data.notes_text) return announce("No notes to read!");
          stopNote();
          const utterance = new SpeechSynthesisUtterance(data.notes_text);
          utterance.rate = 1;
          utterance.pitch = 1;
          speechSynthesis.speak(utterance);
          announce(`Reading ${data.title}`);
        });
    }

    function stopNote() {
      if (speechSynthesis.speaking) speechSynthesis.cancel();
    }

    // Read full dashboard
    function readDashboard() {
      fetch('/get_dashboard_text')
        .then(res => res.json())
        .then(data => {
          stopNote();
          const utterance = new SpeechSynthesisUtterance(data.dashboard_text);
          utterance.rate = 1;
          utterance.pitch = 1;
          speechSynthesis.speak(utterance);
        });
    }

    // Group Members Form
    function addMember() {
      const container = document.getElementById('members-container');
      const entry = document.createElement('div');
      entry.className = 'member-entry';
      entry.innerHTML = `
        <input type="text" name="member_name[]" placeholder="Name" required>
        <input type="text" name="member_id[]" placeholder="Student ID" required>
        <input type="text" name="member_course[]" placeholder="Course/Project" required>
        <button type="button" onclick="removeMember(this)">Remove</button>
      `;
      container.appendChild(entry);
    }

    function removeMember(btn) { btn.parentElement.remove(); }

    // Advanced Voice Commands
    let recognition;
    if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
      const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
      recognition = new SpeechRecognition();
      recognition.continuous = false;
      recognition.lang = 'en-US';

      recognition.onresult = function (event) {
        const command = event.results[0][0].transcript.toLowerCase();
        handleVoiceCommand(command);
      }

      recognition.onerror = function (event) {
        announce("Voice command error: " + event.error);
      }

      function startVoiceCommand() {
        announce("Listening for voice commands...");
        recognition.start();
      }
    } else {
      announce("Voice commands are not supported in this browser.");
    }

    function handleVoiceCommand(command) {
      announce(`You said: ${command}`);

      if (command.startsWith("open notebook")) {
        const name = command.replace("open notebook", "").trim();
        const links = document.querySelectorAll("#notebook-list a");
        for (let link of links) {
          if (link.textContent.toLowerCase() === name.toLowerCase()) {
            link.focus();
            link.click();
            announce(`Opening notebook ${link.textContent}`);
            return;
          }
        }
        announce(`Notebook ${name} not found`);
        return;
      }

      if (command.includes("read notebooks")) {
        readDashboardSection('notebook');
        return;
      }

      if (command.includes("read groups")) {
        readDashboardSection('group');
        return;
      }

      if (command.startsWith("create notebook")) {
        const title = command.replace("create notebook", "").trim();
        document.querySelector('input[name="title"]').value = title;
        announce(`Created notebook titled ${title}`);
        return;
      }

      announce("Command not recognized. Try: 'Open notebook', 'Read notebooks', 'Read groups', 'Create notebook <title>'");
    }

    function readDashboardSection(section) {
      stopNote();
      let text = '';
      if (section === 'notebook') {
        const notes = document.querySelectorAll("#notebook-list li a");
        if (notes.length === 0) return announce("No notebooks to read");
        notes.forEach(n => text += n.textContent + ". ");
      } else if (section === 'group') {
        const groups = document.querySelectorAll("section[aria-label='Groups'] ul li strong");
        if (groups.length === 0) return announce("No groups to read");
        groups.forEach(g => text += g.textContent + ". ");
      }
      const utterance = new SpeechSynthesisUtterance(text);
      speechSynthesis.speak(utterance);
    }
  </script>
</body>

>>>>>>> 43d8451 (Updated code for Sprint 1)
=======
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Dashboard - NoteBridge</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  <style>
    body.high-contrast {
      background-color: #000;
      color: #fff;
    }

    .font-small {
      font-size: 14px;
    }

    .font-medium {
      font-size: 18px;
    }

    .font-large {
      font-size: 22px;
    }

    ul {
      list-style-type: none;
      padding: 0;
    }

    li {
      margin-bottom: 8px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .btn {
      padding: 5px 10px;
      cursor: pointer;
    }

    header,
    section,
    footer {
      margin-bottom: 20px;
    }

    #search-notes {
      margin-bottom: 10px;
      padding: 5px;
      width: 100%;
      max-width: 300px;
    }

    header {
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    header img.logo {
      height: 50px;
      margin-right: 15px;
    }

    header .welcome {
      font-size: 18px;
      margin-left: 10px;
    }

    footer {
      text-align: center;
      font-size: 14px;
      color: #888;
      margin-top: 30px;
      border-top: 1px solid #ccc;
      padding-top: 10px;
    }

    button.tts-btn {
      margin-left: 5px;
    }

    .member-entry {
      display: flex;
      gap: 5px;
      margin-bottom: 5px;
      align-items: center;
    }
  </style>
</head>

<body class="font-medium">
  <header>
    <div style="display:flex; align-items:center;">
      <img src="{{ url_for('static', filename='logo.jpg') }}" alt="NoteBridge Logo" class="logo">
      <div class="welcome">Welcome, {{ user['full_name'] or user['username'] }}!</div>
    </div>
    <nav>
      <a href="{{ url_for('logout') }}" class="btn">Logout</a>
    </nav>
  </header>

  <!-- Accessibility controls -->
  <div aria-label="Accessibility settings" role="region" style="margin-bottom: 20px;">
    <label for="font-size">Font Size:</label>
    <select id="font-size" onchange="changeFontSize(this.value)">
      <option value="font-small">Small</option>
      <option value="font-medium" selected>Medium</option>
      <option value="font-large">Large</option>
    </select>

    <label for="contrast-toggle">High Contrast:</label>
    <input type="checkbox" id="contrast-toggle" onchange="toggleContrast(this.checked)">
  </div>

  <main style="display:flex; gap:40px;">
    <!-- Notebooks Section -->
    <section aria-label="Notebooks" role="region" style="flex:1;">
      <h2>Your Notebooks</h2>
      <input type="text" id="search-notes" placeholder="Search Notes..." oninput="filterNotes()">

      <ul id="notebook-list">
        {% for nb in notebooks %}
        <li>
          <a href="{{ url_for('view_notebook', notebook_id=nb['id']) }}"
            aria-label="Open collaborative editor for {{ nb['title'] }}">
            {{ nb['title'] }}
          </a>
          <button class="tts-btn" onclick="playNote('{{ nb['id'] }}')"
            aria-label="Play notes in {{ nb['title'] }}">üîä</button>
          <button class="tts-btn" onclick="stopNote()" aria-label="Stop reading {{ nb['title'] }}">‚èπ</button>
        </li>
        {% else %}
        <li>No notebooks yet.</li>
        {% endfor %}
      </ul>

      <form method="post" action="{{ url_for('create_notebook') }}">
        <input type="text" name="title" placeholder="New Notebook Title" aria-label="New notebook title">
        <label><input type="checkbox" name="is_shared"> Shared?</label>
        <button type="submit" class="btn">Create Notebook</button>
      </form>
    </section>

    <!-- Groups Section -->
    <section aria-label="Groups" role="region" style="flex:1;">
      <h2>Groups</h2>

      <!-- Existing groups -->
      <ul>
        {% for g in groups %}
        <li>
          <strong>{{ g['name'] }}</strong> ({{ g['members'] }} members)
          <a href="{{ url_for('view_group', group_id=g['id']) }}" class="btn">View</a>
          <a href="{{ url_for('edit_group', group_id=g['id']) }}" class="btn">Edit</a>
          <form method="post" action="{{ url_for('delete_group', group_id=g['id']) }}" style="display:inline">
            <button type="submit" class="btn">Delete</button>
          </form>
        </li>
        {% else %}
        <li>No groups yet.</li>
        {% endfor %}
      </ul>

      <!-- Create new group -->
      <form method="post" action="{{ url_for('create_group') }}">
        <input type="text" name="name" placeholder="Group Name" aria-label="Group Name" required>
        <div id="members-container">
          <h4>Members</h4>
          <div class="member-entry">
            <input type="text" name="member_name[]" placeholder="Name" required>
            <input type="text" name="member_id[]" placeholder="Student ID" required>
            <input type="text" name="member_course[]" placeholder="Course/Project" required>
            <button type="button" onclick="removeMember(this)">Remove</button>
          </div>
        </div>
        <button type="button" onclick="addMember()">Add Member</button>
        <button type="submit" class="btn">Create Group</button>
      </form>
    </section>
  </main>

  <footer>
    &copy; 2025 NoteBridge. All rights reserved.
  </footer>

  <script>
    // Accessibility
    function changeFontSize(sizeClass) {
      document.body.classList.remove('font-small', 'font-medium', 'font-large');
      document.body.classList.add(sizeClass);
    }

    function toggleContrast(enabled) {
      if (enabled) document.body.classList.add('high-contrast');
      else document.body.classList.remove('high-contrast');
    }

    // Search
    function filterNotes() {
      const query = document.getElementById('search-notes').value.toLowerCase();
      const notes = document.getElementById('notebook-list').getElementsByTagName('li');
      for (let note of notes) {
        const text = note.textContent.toLowerCase();
        note.style.display = text.includes(query) ? '' : 'none';
      }
    }

    // Text-to-Speech
    function playNote(notebookId) {
      fetch(`/get_notes_text/${notebookId}`)
        .then(response => response.json())
        .then(data => {
          const text = data.notes_text;
          if (!text) return alert("No notes to read!");
          stopNote(); // Stop any ongoing speech
          const utterance = new SpeechSynthesisUtterance(text);
          utterance.rate = 1;
          utterance.pitch = 1;
          speechSynthesis.speak(utterance);
        })
        .catch(err => console.error(err));
    }

    function stopNote() {
      if (speechSynthesis.speaking) {
        speechSynthesis.cancel();
      }
    }

    // Group members dynamic add/remove
    function addMember() {
      const container = document.getElementById('members-container');
      const entry = document.createElement('div');
      entry.className = 'member-entry';
      entry.innerHTML = `
        <input type="text" name="member_name[]" placeholder="Name" required>
        <input type="text" name="member_id[]" placeholder="Student ID" required>
        <input type="text" name="member_course[]" placeholder="Course/Project" required>
        <button type="button" onclick="removeMember(this)">Remove</button>
      `;
      container.appendChild(entry);
    }

    function removeMember(btn) {
      btn.parentElement.remove();
    }
  </script>
</body>

>>>>>>> origin/main
</html>